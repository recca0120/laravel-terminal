(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};!function(e,n,r){var i,o,s,c,u,a,_;return c=e("meta[name='csrf-token']").attr("content"),e.ajaxSetup({headers:{"X-CSRF-TOKEN":c}}),a=n.Terminal.environment,u=n.Terminal.endPoint,s=[" __                        _    _____              _         _ ","|  |   ___ ___ ___ _ _ ___| |  |_   ____ ___ _____|_|___ ___| |","|  |__| .'|  _| .'| | | -_| |    | || -_|  _|     | |   | .'| |","|_____|__,|_| |__,|\\_/|___|_|    |_||___|_| |_|_|_|_|_|_|__,|_|","","Copyright (c) 2015 Recca Tsai <http://phpwrite.blogspot.tw/>","",""].join("\n"),i=function(){var t,e,n,r;return t=["/","|","\\","-"],r=null,n=50,e=null,{show:function(i){var o;return i.disable(),e=i.get_prompt(),o=0,r=setInterval(function(){return i.set_prompt(t[o++]),o>t.length-1?o=0:void 0},n)},hide:function(t){return clearInterval(r),t.enable(),t.set_prompt(e)}}}(),o=function(){function n(){this.execute=t(this.execute,this),this.commandArtisan=t(this.commandArtisan,this),this.rpcRequest=t(this.rpcRequest,this),this.interpreter=t(this.interpreter,this),this.toBoolean=t(this.toBoolean,this),this.confirm=t(this.confirm,this),this.comment=t(this.comment,this),this.info=t(this.info,this),this.line=t(this.line,this)}var r;return n.prototype.ids={},n.prototype.line=function(t,e){return t=t.replace(/&/g,"&amp;").replace(/\[/g,"&#91;").replace(/\]/g,"&#93;"),"[[;"+e+";]"+t+"]"},n.prototype.info=function(t){return this.line(t,"#008400")},n.prototype.comment=function(t){return this.line(t,"#a50")},n.prototype.confirm=function(t,n,r){var i;return i=e.Deferred(),t.echo(r),t.echo(n),t.push(function(e){return function(n){i.resolve(e.toBoolean(n)),t.pop()}}(this),{prompt:">"}),i.promise()},n.prototype.toBoolean=function(t){switch(t.toLowerCase()){case"y":case"yes":return!0;default:return!1}},n.prototype.interpreter=function(t,e,n){return n||(n=t),e.push(function(n){return function(r){return n.execute(e,t.replace(/\s+/g,"-")+" "+r),!1}}(this),{prompt:n+">"}),!1},n.prototype.rpcRequest=function(t,n){return this.ids[n.method]=this.ids[n.method]||0,i.show(t),e.ajax({url:u,dataType:"json",type:"post",data:{jsonrpc:"2.0",id:++this.ids[n.method],cmd:n}}).success(function(e){return function(e){return t.echo(e.result.replace(/Exception\]/,"Exception&#93;"))}}(this)).error(function(e,n,r){return t.error(e.status+": "+r)}).complete(function(){return i.hide(t)})},r=function(t){return""+t.charAt(0).toUpperCase()+t.slice(1)},n.prototype.commandArtisan=function(t,n){var r,i,o;return r=e.terminal.parseCommand(n.rest.trim()),o=["",this.comment("**************************************"),this.comment("*     Application In Production!     *"),this.comment("**************************************"),""].join("\n"),i=this.info("Do you really wish to run this command? [y/N] (yes/no)")+" "+this.comment("[no]")+": ","production"===a&&-1===e.inArray("--force",r.args)&&(0===r.name.indexOf("migrate")&&-1===r.name.indexOf("migrate:status")||0===r.name.indexOf("db:seed"))?void this.confirm(t,i,o).done(function(e){return function(r){return r===!0?e.rpcRequest(t,n):(t.echo(" "),t.echo(""+e.comment("Command Cancelled!")),t.echo(" "))}}(this)):this.rpcRequest(t,n)},n.prototype.execute=function(t,n){var i;switch(n){case"help":i=e.terminal.parseCommand("list"),this.rpcRequest(t,i);break;case"artisan tinker":this.interpreter(n,t,"tinker");break;case"mysql":this.interpreter(n,t);break;default:i=e.terminal.parseCommand(n.trim()),this["command"+r(i.name)]?this["command"+r(i.name)](t,i):this.rpcRequest(t,i)}},n}(),_=new o,e(r.body).terminal(function(t,e){return _.execute(e,t)},{onInit:function(t){return _.execute(t,"list")},onBlur:function(){return!1},greetings:s})}(jQuery,window,document)}).call(this);